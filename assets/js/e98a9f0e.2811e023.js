"use strict";(self.webpackChunktrevas_documentation=self.webpackChunktrevas_documentation||[]).push([[1814],{39308:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(67294),i=n(3905),r=n(84734);const s="riContainer_QAfm",d="riDescriptionShort_ogAL",l="riDetail_rDiW",o="riIcon_zSrR",c="riTitle__Mkd",p="riDescription_k_lG",g="riMore_lLbd";var v=n(86010);const u=e=>{const[t,n]=a.useState(!1);return a.createElement("a",{href:e.page,className:s},a.createElement("div",{className:d},a.createElement("div",{className:o},a.createElement("span",{className:"fe fe-zap"})),a.createElement("div",{className:l},a.createElement("div",{className:c},a.createElement("a",{href:e.page},e.title)),a.createElement("div",{className:p},e.description,a.Children.count(e.children)>0&&a.createElement("span",{className:(0,v.Z)(g,"fe","fe-more-horizontal"),onClick:()=>n(!t)})))),t&&a.createElement("div",{className:"ri-description-long"},a.createElement(i.Zo,{components:r.Z},e.children)))}},66637:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>v,frontMatter:()=>d,metadata:()=>o,toc:()=>p});var a=n(87462),i=(n(67294),n(3905)),r=n(44996),s=n(39308);const d={id:"index-developer-guide",title:"Developer guide",sidebar_label:"Overview",slug:"/developer-guide",custom_edit_url:null},l=void 0,o={unversionedId:"developer-guide/index-developer-guide",id:"developer-guide/index-developer-guide",title:"Developer guide",description:"Import the Trevas engine",source:"@site/docs/developer-guide/index-developer-guide.mdx",sourceDirName:"developer-guide",slug:"/developer-guide",permalink:"/Trevas/developer-guide",draft:!1,editUrl:null,tags:[],version:"current",lastUpdatedAt:1720593860,formattedLastUpdatedAt:"Jul 10, 2024",frontMatter:{id:"index-developer-guide",title:"Developer guide",sidebar_label:"Overview",slug:"/developer-guide",custom_edit_url:null},sidebar:"docs",previous:{title:"Clause operators",permalink:"/Trevas/user-guide/coverage/clause-operators"},next:{title:"Overview",permalink:"/Trevas/developer-guide/basic-mode"}},c={},p=[{value:"Import the Trevas engine",id:"import-the-trevas-engine",level:3},{value:"Instantiate the Trevas engine",id:"instantiate-the-trevas-engine",level:3},{value:"Execution mode",id:"execution-mode",level:3}],g={toc:p};function v(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",{id:"import-the-trevas-engine"},"Import the Trevas engine"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>fr.insee.trevas</groupId>\n    <artifactId>vtl-engine</artifactId>\n    <version>1.4.1</version>\n</dependency>\n")),(0,i.kt)("h3",{id:"instantiate-the-trevas-engine"},"Instantiate the Trevas engine"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'// Start engine\nScriptEngine engine = new ScriptEngineManager().getEngineByName("vtl");\n\n// Add input bindings to engine\nBindings bindings = new SimpleBindings();\nInMemoryDataset dataset = new InMemoryDataset(\n                List.of(\n                        Map.of("var1", "x", "var2", "y", "var3", 5),\n                        Map.of("var1", "xx", "var2", "yy", "var3", 10)\n                ),\n                Map.of("var1", String.class, "var2", String.class, "var3", Long.class),\n                Map.of("var1", Role.IDENTIFIER, "var2", Role.ATTRIBUTE, "var3", Role.MEASURE)\n);\nbindings.put("a", 1);\nbindings.put("ds", dataset);\nengine.setBindings(b, ScriptContext.ENGINE_SCOPE);\n\n// Execute script\ntry {\n        engine.eval("b := a + 1; " +\n                    "ds1 := ds;" +\n                    "ds2 <- ds;");\n} catch (VtlScriptException e) {\n        logger.warn("Eval failed: ", e);\n}\n\n// Get result\nLong result = (Long) engine.getBindings(ScriptContext.ENGINE_SCOPE).get("b");\nDataset ds1 = (Dataset) engine.getBindings(ScriptContext.ENGINE_SCOPE).get("ds1");\nPersistentDataset result = (PersistentDataset) engine.getBindings(ScriptContext.ENGINE_SCOPE).get("ds2");\n')),(0,i.kt)("h3",{id:"execution-mode"},"Execution mode"),(0,i.kt)("div",{className:"row"},(0,i.kt)("div",{className:"col"},(0,i.kt)(s.Z,{title:"Basic mode",page:(0,r.Z)("/developer-guide/basic-mode"),mdxType:"Card"})),(0,i.kt)("div",{className:"col"},(0,i.kt)(s.Z,{title:"Spark mode",page:(0,r.Z)("/developer-guide/spark-mode"),mdxType:"Card"}))))}v.isMDXComponent=!0}}]);