<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Trevas Blog</title>
        <link>https://trevas.info/Trevas/zh-CN/blog</link>
        <description>Trevas Blog</description>
        <lastBuildDate>Wed, 09 Oct 2024 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>zh-CN</language>
        <item>
            <title><![CDATA[Trevas - VTL 2.1]]></title>
            <link>https://trevas.info/Trevas/zh-CN/blog/trevas-vtl-21</link>
            <guid>https://trevas.info/Trevas/zh-CN/blog/trevas-vtl-21</guid>
            <pubDate>Wed, 09 Oct 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Trevas 1.7.0 upgrade to version 2.1 of VTL.]]></description>
            <content:encoded><![CDATA[<p>Trevas 1.7.0 upgrade to version 2.1 of VTL.</p>
<p>This version introduces two new operators:</p>
<ul>
<li><code>random</code></li>
<li><code>case</code></li>
</ul>
<p><code>random</code> produces a decimal number between 0 and 1.</p>
<p><code>case</code> allows for clearer multi conditional branching, for example:</p>
<p><code>ds2 := ds1[ calc c := case when r &lt; 0.2 then "Low" when r &gt; 0.8 then "High" else "Medium" ]</code></p>
<p>Both operators are already available in Trevas!</p>
<p>The new grammar also provides time operators and includes corrections, without any breaking changes compared to the 2.0 version.</p>
<p>See the <a href="https://trevas.info/Trevas/zh-CN/user-guide/coverage">coverage</a> section for more details.</p>]]></content:encoded>
            <category>Trevas</category>
            <category>VTL 2.1</category>
        </item>
        <item>
            <title><![CDATA[Trevas - Provenance]]></title>
            <link>https://trevas.info/Trevas/zh-CN/blog/trevas-provenance</link>
            <guid>https://trevas.info/Trevas/zh-CN/blog/trevas-provenance</guid>
            <pubDate>Mon, 07 Oct 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[News]]></description>
            <content:encoded><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="news">News<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-provenance#news" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<p>Trevas 1.6.0 introduces the VTL Prov module.</p>
<p>This module enables to produce lineage metadata from Trevas, based on RDF ontologies: <code>PROV-O</code> and <code>SDTH</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sdth-model-overview">SDTH model overview<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-provenance#sdth-model-overview" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<!-- -->
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="adopted-model">Adopted model<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-provenance#adopted-model" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<p>The <code>vtl-prov</code> module, version 1.6.0, uses the following partial model:</p>
<!-- -->
<p>Improvements will come in next weeks.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tools-available">Tools available<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-provenance#tools-available" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<p>Provenance Trevas tools are documented <a href="https://trevas.info/Trevas/zh-CN/developer-guide/spark-mode/data-sources/sdmx">here</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-provenance#example" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="business-use-case">Business use case<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-provenance#business-use-case" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h5>
<p>Two sources datasets are transformed to produce transient datasets and a final permanent one.</p>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="inputs">Inputs<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-provenance#inputs" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<p><code>ds1</code> &amp; <code>ds2</code> metadata:</p>
<table><thead><tr><th style="text-align:center">id</th><th style="text-align:center">var1</th><th style="text-align:center">var2</th></tr></thead><tbody><tr><td style="text-align:center">STRING</td><td style="text-align:center">INTEGER</td><td style="text-align:center">NUMBER</td></tr><tr><td style="text-align:center">IDENTIFIER</td><td style="text-align:center">MEASURE</td><td style="text-align:center">MEASURE</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vtl-script">VTL script<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-provenance#vtl-script" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<div class="language-vtl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-vtl codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds_sum := ds1 + ds2;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds_mul := ds_sum * 3;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds_res &lt;- ds_mul[filter mod(var1, 2) = 0][calc var_sum := var1 + var2];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rdf-model-target">RDF model target<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-provenance#rdf-model-target" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<div class="language-ttl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ttl codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PREFIX prov: &lt;http://www.w3.org/ns/prov#&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PREFIX sdth: &lt;http://rdf-vocabulary.ddialliance.org/sdth#&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># --- Program and steps</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;http://example.com/program1&gt; a sdth:Program ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    a prov:Agent ; # Agent? Or an activity</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rdfs:label "My program 1"@en, "Mon programme 1"@fr ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:hasProgramStep &lt;http://example.com/program1/program-step1&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        &lt;http://example.com/program1/program-step2&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        &lt;http://example.com/program1/program-step3&gt; .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;http://example.com/program1/program-step1&gt; a sdth:ProgramStep ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rdfs:label "Program step 1"@en, "Étape 1"@fr ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:hasSourceCode "ds_sum := ds1 + ds2;" ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:consumesDataframe  &lt;http://example.com/dataset/ds1&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            &lt;http://example.com/dataset/ds2&gt; ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:producesDataframe &lt;http://example.com/dataset/ds_sum&gt; .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;http://example.com/program1/program-step2&gt; a sdth:ProgramStep ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rdfs:label "Program step 2"@en, "Étape 2"@fr ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:hasSourceCode "ds_mul := ds_sum * 3;" ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:consumesDataframe &lt;http://example.com/dataset/ds_sum&gt; ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:producesDataframe &lt;http://example.com/dataset/ds_mul&gt; .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;http://example.com/program1/program-step3&gt; a sdth:ProgramStep ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rdfs:label "Program step 3"@en, "Étape 3"@fr ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:hasSourceCode "ds_res &lt;- ds_mul[filter mod(var1, 2) = 0][calc var_sum := var1 + var2];" ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:consumesDataframe &lt;http://example.com/dataset/ds_mul&gt; ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:producesDataframe &lt;http://example.com/dataset/ds_res&gt; ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:usesVariable   &lt;http://example.com/variable/var1&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        &lt;http://example.com/variable/var2&gt; ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:assignsVariable &lt;http://example.com/variable/var_sum&gt; .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># --- Variables</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># i think here it's not instances but names we refer to...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;http://example.com/variable/id1&gt; a sdth:VariableInstance ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                  rdfs:label "id1" .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;http://example.com/variable/var1&gt; a sdth:VariableInstance ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                  rdfs:label "var1" .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;http://example.com/variable/var2&gt; a sdth:VariableInstance ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                  rdfs:label "var2" .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;http://example.com/variable/var_sum&gt; a sdth:VariableInstance ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                  rdfs:label "var_sum" .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># --- Data frames</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;http://example.com/dataset/ds1&gt; a sdth:DataframeInstance ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rdfs:label "ds1" ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:hasName "ds1" ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:hasVariableInstance    &lt;http://example.com/variable/id1&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                &lt;http://example.com/variable/var1&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                &lt;http://example.com/variable/var2&gt; .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;http://example.com/dataset/ds2&gt; a sdth:DataframeInstance ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rdfs:label "ds2" ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:hasName "ds2" ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:hasVariableInstance    &lt;http://example.com/variable/id1&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                &lt;http://example.com/variable/var1&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                &lt;http://example.com/variable/var2&gt; .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;http://example.com/dataset/ds_sum&gt; a sdth:DataframeInstance ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rdfs:label "ds_sum" ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:hasName "ds_sum" ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:wasDerivedFrom &lt;http://example.com/dataset/ds1&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        &lt;http://example.com/dataset/ds2&gt; ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:hasVariableInstance    &lt;http://example.com/variable/id1&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                &lt;http://example.com/variable/var1&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                &lt;http://example.com/variable/var2&gt; .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;http://example.com/dataset/ds_mul&gt; a sdth:DataframeInstance ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rdfs:label "ds_mul" ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:hasName "ds_mul" ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:wasDerivedFrom &lt;http://example.com/dataset/ds_sum&gt; ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:hasVariableInstance    &lt;http://example.com/variable/id1&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                &lt;http://example.com/variable/var1&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                &lt;http://example.com/variable/var2&gt; .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;http://example.com/dataset/ds_res&gt; a sdth:DataframeInstance ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rdfs:label "ds_res" ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:wasDerivedFrom &lt;http://example.com/dataset/ds_mul&gt; ;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sdth:hasVariableInstance    &lt;http://example.com/variable/id1&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                &lt;http://example.com/variable/var1&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                &lt;http://example.com/variable/var2&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                &lt;http://example.com/variable/var_sum&gt; .</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>Trevas</category>
            <category>provenance</category>
            <category>SDTH</category>
        </item>
        <item>
            <title><![CDATA[Trevas - SDMX]]></title>
            <link>https://trevas.info/Trevas/zh-CN/blog/trevas-sdmx</link>
            <guid>https://trevas.info/Trevas/zh-CN/blog/trevas-sdmx</guid>
            <pubDate>Tue, 25 Jun 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[News]]></description>
            <content:encoded><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="news">News<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-sdmx#news" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<p>Trevas 1.4.1 introduces the VTL SDMX module.</p>
<p>This module enables to consume SDMX metadata sources to instantiate Trevas DataStructures and Datasets.</p>
<p>It also allows to execute the VTL TransformationSchemes to obtain the resulting persistent datasets.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-sdmx#overview" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<div style="text-align:center"><img src="https://trevas.info/Trevas/zh-CN/img/vtl-sdmx-light.svg" alt="VTL SDMX Diagram" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="https://trevas.info/Trevas/zh-CN/img/vtl-sdmx-dark.svg" alt="VTL SDMX Diagram" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div>
<p>Trevas supports the above SDMX message elements. Only the VtlMappingSchemes element is optional.</p>
<p>The elements in box 1 are used to produce Trevas DataStructures, filling VTL components attributes name, role, type, nullable and valuedomain.</p>
<p>The elements in box 2 are used to generate the VTL code (rulesets &amp; transformations).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tools-available">Tools available<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-sdmx#tools-available" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<p>SDMX Trevas tools are documented <a href="https://trevas.info/Trevas/zh-CN/developer-guide/spark-mode/data-sources/sdmx">here</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-sdmx#troubleshooting" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<p>Have a look to <a href="https://trevas.info/Trevas/zh-CN/developer-guide/spark-mode/data-sources/sdmx#troubleshooting">this section</a>.</p>]]></content:encoded>
            <category>Trevas</category>
            <category>SDMX</category>
        </item>
        <item>
            <title><![CDATA[Trevas - Temporal operators]]></title>
            <link>https://trevas.info/Trevas/zh-CN/blog/trevas-temporal-operators</link>
            <guid>https://trevas.info/Trevas/zh-CN/blog/trevas-temporal-operators</guid>
            <pubDate>Fri, 21 Jun 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Temporal operators in Trevas]]></description>
            <content:encoded><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="temporal-operators-in-trevas">Temporal operators in Trevas<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-temporal-operators#temporal-operators-in-trevas" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<p>The version 1.4.1 of Trevas introduces preliminary support for date and time types
and operators.</p>
<p>The specification describes temporal types such as <code>date</code>, <code>time_period</code>, <code>time</code>, and <code>duration</code>. However, Trevas authors find
these descriptions unsatisfactory. This blog post outlines our implementation choices and how they differ from the spec.</p>
<p>In the specification, <code>time_period</code> (and the types <code>date</code>) is described as a compound type with a start and end (or a
start and a duration). This complicates the implementation and brings little value to the language as one can simply
operate on a combination of dates or date and duration directly. For this reason, we defined an algebra between the
temporal types and did not yet implement the <code>time_period</code>.</p>
<table><thead><tr><th>result (operators)</th><th>date</th><th>duration</th><th>number</th></tr></thead><tbody><tr><td><strong>date</strong></td><td>n/a</td><td>date (+, -)</td><td>n/a</td></tr><tr><td><strong>duration</strong></td><td>date (+, -)</td><td>duration (+, -)</td><td>duration (*)</td></tr><tr><td><strong>number</strong></td><td>n/a</td><td>duration (*)</td><td>n/a</td></tr></tbody></table>
<p>The <code>period_indicator</code> function relies on period-awareness for types that are not defined enough at the moment to
be implemented.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="java-mapping">Java mapping<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-temporal-operators#java-mapping" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<p>The VTL type <code>date</code> is represented internally as the
types <a href="https://docs.oracle.com/en%2Fjava%2Fjavase%2F11%2Fdocs%2Fapi%2F%2F/java.base/java/time/Instant.html" target="_blank" rel="noopener noreferrer"><code>java.time.Instant</code></a>,
<a href="https://docs.oracle.com/en%2Fjava%2Fjavase%2F11%2Fdocs%2Fapi%2F%2F/java.base/java/time/ZonedDateTime.html" target="_blank" rel="noopener noreferrer"><code>java.time.ZonedDateTime</code></a>
and <a href="https://docs.oracle.com/en%2Fjava%2Fjavase%2F11%2Fdocs%2Fapi%2F%2F/java.base/java/time/OffsetDateTime.html#:~:text=OffsetDateTime%20is%20an%20immutable%20representation,be%20stored%20in%20an%20OffsetDateTime%20." target="_blank" rel="noopener noreferrer"><code>java.time.OffsetDateTime</code></a></p>
<p>Instant represent a specific moment in time. Note that this type does not include timezone information and is therefore
not usable with all the operators. One can use the types <code>ZonedDateTime</code> and <code>OffsetDateTime</code> when timezone or time
saving is required.</p>
<p>The VTL type <code>duration</code> is represented internally as the
type <a href="https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/PeriodDuration.html" target="_blank" rel="noopener noreferrer"><code>org.threeten.extra.PeriodDuration</code></a>
from the <a href="https://www.threeten.org/threeten-extra/" target="_blank" rel="noopener noreferrer">threeten extra</a> package.
It represents a duration using both calendar units (years, months, days) and a temporal amount (hours, minutes, seconds
and nanoseconds).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-flow_to_stock">Function <code>flow_to_stock</code><a href="https://trevas.info/Trevas/zh-CN/blog/trevas-temporal-operators#function-flow_to_stock" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<p>The flow_to_stock function converts a data set with flow interpretation into a stock interpretation. This transformation
is useful when you want to aggregate flow data (e.g., sales or production rates) into cumulative stock data (e.g., total
inventory).</p>
<p><strong>Syntax:</strong></p>
<p><code>result := flow_to_stock(op)</code></p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>op</code> - The input data set with flow interpretation. The data set must have an identifier of type <code>time</code>, additional
identifiers, and at least one measure of type <code>number</code>.</li>
</ul>
<p><strong>Result:</strong></p>
<p>The function returns a data set with the same structure as the input, but with the values converted to stock
interpretation.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-stock_to_flow">Function <code>stock_to_flow</code><a href="https://trevas.info/Trevas/zh-CN/blog/trevas-temporal-operators#function-stock_to_flow" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<p>The <code>stock_to_flow</code> function converts a data set with stock interpretation into a flow interpretation. This
transformation is useful when you want to derive flow data from cumulative stock data.</p>
<p><strong>Syntax:</strong></p>
<p><code>result := stock_to_flow(op)</code></p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>op</code> - The input data set with stock interpretation. The data set must have an identifier of type <code>time</code>, additional
identifiers, and at least one measure of type <code>number</code>.</li>
</ul>
<p><strong>Result:</strong></p>
<p>The function returns a data set with the same structure as the input, but with the values converted to flow
interpretation.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-timeshift">Function <code>timeshift</code><a href="https://trevas.info/Trevas/zh-CN/blog/trevas-temporal-operators#function-timeshift" class="hash-link" aria-label="标题的直�接链接" title="标题的直接链接">​</a></h4>
<p>The <code>timeshift</code> function shifts the time component of a specified range of time in the data set. This is useful for
analyzing data at different time offsets, such as comparing current values to past values.</p>
<p><strong>Syntax:</strong></p>
<p><code>result := timeshift(op, shiftNumber)</code></p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>op</code> - The operand data set containing time series.</li>
<li><code>shiftNumber</code> - An integer representing the number of periods to shift. Positive values shift forward in time, while
negative values shift backward.</li>
</ul>
<p><strong>Result:</strong></p>
<p>The function returns a data set with the time identifiers shifted by the specified number of periods.</p>]]></content:encoded>
            <category>Trevas</category>
        </item>
        <item>
            <title><![CDATA[Trevas - Java 17]]></title>
            <link>https://trevas.info/Trevas/zh-CN/blog/trevas-java-17</link>
            <guid>https://trevas.info/Trevas/zh-CN/blog/trevas-java-17</guid>
            <pubDate>Wed, 22 Nov 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[News]]></description>
            <content:encoded><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="news">News<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-java-17#news" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<p>Trevas 1.2.0 enables Java 17 support.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="java-modules-handling">Java modules handling<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-java-17#java-modules-handling" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<p>Spark does not support Java modules.</p>
<p>Java 17 client apps, embedding Trevas in Spark mode have to configure <code>UNNAMED</code> modules for Spark.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="maven">Maven<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-java-17#maven" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<p>Add to your <code>pom.xml</code> file, in the <code>build &gt; plugins</code> section:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">plugin</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">org.apache.maven.plugins</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">maven-compiler-plugin</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">version</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">3.11.0</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">version</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">configuration</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">compilerArgs</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">arg</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">--add-exports</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">arg</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">arg</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">java.base/sun.nio.ch=ALL-UNNAMED</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">arg</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">compilerArgs</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">configuration</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">plugin</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="docker">Docker<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-java-17#docker" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ENTRYPOINT ["java", "--add-exports", "java.base/sun.nio.ch=ALL-UNNAMED", "mainClass"]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>Trevas</category>
        </item>
        <item>
            <title><![CDATA[Trevas - Persistent assignments]]></title>
            <link>https://trevas.info/Trevas/zh-CN/blog/trevas-persistent-assignments</link>
            <guid>https://trevas.info/Trevas/zh-CN/blog/trevas-persistent-assignments</guid>
            <pubDate>Wed, 22 Nov 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[News]]></description>
            <content:encoded><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="news">News<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-persistent-assignments#news" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<p>Trevas 1.2.0 includes the persistent assignment support: <code>ds1 &lt;- ds;</code>.</p>
<p>In Trevas, persistent datasets are represented as <code>PersistentDataset</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="handle-persistentdataset">Handle <code>PersistentDataset</code><a href="https://trevas.info/Trevas/zh-CN/blog/trevas-persistent-assignments#handle-persistentdataset" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<p>Trevas datasets are represented as <code>Dataset</code>.</p>
<p>After running the Trevas engine, you can use persistent datasets with something like:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Bindings engineBindings = engine.getContext().getBindings(ScriptContext.ENGINE_SCOPE);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">engineBindings.forEach((k, v) -&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if (v instanceof PersistentDataset) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        fr.insee.vtl.model.Dataset ds = ((PersistentDataset) v).getDelegate();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if (ds instanceof SparkDataset) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Dataset&lt;Row&gt; sparkDs = ((SparkDataset) ds).getSparkDataset();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            // Do what you want with sparkDs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>Trevas</category>
        </item>
        <item>
            <title><![CDATA[Trevas - check_hierarchy]]></title>
            <link>https://trevas.info/Trevas/zh-CN/blog/trevas-check_hierarchy</link>
            <guid>https://trevas.info/Trevas/zh-CN/blog/trevas-check_hierarchy</guid>
            <pubDate>Fri, 01 Sep 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[News]]></description>
            <content:encoded><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="news">News<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-check_hierarchy#news" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<p>Trevas 1.1.0 includes hierarchical validation via operators <code>define hierarchical ruleset</code> and <code>check_hierarchy</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-check_hierarchy#example" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="input">Input<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-check_hierarchy#input" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<p><code>ds1</code>:</p>
<table><thead><tr><th style="text-align:center">id</th><th style="text-align:center">Me</th></tr></thead><tbody><tr><td style="text-align:center">ABC</td><td style="text-align:center">12</td></tr><tr><td style="text-align:center">A</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">B</td><td style="text-align:center">10</td></tr><tr><td style="text-align:center">C</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">DEF</td><td style="text-align:center">100</td></tr><tr><td style="text-align:center">E</td><td style="text-align:center">99</td></tr><tr><td style="text-align:center">F</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">HIJ</td><td style="text-align:center">100</td></tr><tr><td style="text-align:center">H</td><td style="text-align:center">99</td></tr><tr><td style="text-align:center">I</td><td style="text-align:center">0</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="vtl-script">VTL script<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-check_hierarchy#vtl-script" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Ensure ds1 metadata definition is good</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds1 := ds1[calc identifier id := id, Me := cast(Me, integer)];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Define hierarchical ruleset</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">define hierarchical ruleset hr (variable rule Me) is</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    My_Rule : ABC = A + B + C errorcode "ABC is not sum of A,B,C" errorlevel 1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    DEF = D + E + F errorcode "DEF is not sum of D,E,F";</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    HIJ : HIJ = H + I - J errorcode "HIJ is not H + I - J" errorlevel 10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">end hierarchical ruleset;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Check hierarchy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds_all := check_hierarchy(ds1, hr rule id all);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds_all_measures := check_hierarchy(ds1, hr rule id always_null all_measures);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ds_invalid := check_hierarchy(ds1, hr rule id always_zero invalid);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="outputs">Outputs<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-check_hierarchy#outputs" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<ul>
<li><code>ds_all</code></li>
</ul>
<table><thead><tr><th style="text-align:center">id</th><th style="text-align:center">ruleid</th><th style="text-align:center">bool_var</th><th style="text-align:center">errorcode</th><th style="text-align:center">errorlevel</th><th style="text-align:center">imbalance</th></tr></thead><tbody><tr><td style="text-align:center">ABC</td><td style="text-align:center">My_Rule</td><td style="text-align:center">true</td><td style="text-align:center">null</td><td style="text-align:center">null</td><td style="text-align:center">0</td></tr></tbody></table>
<ul>
<li><code>ds_always_null_all_measures</code></li>
</ul>
<table><thead><tr><th style="text-align:center">id</th><th style="text-align:center">Me</th><th style="text-align:center">ruleid</th><th style="text-align:center">bool_var</th><th style="text-align:center">errorcode</th><th style="text-align:center">errorlevel</th><th style="text-align:center">imbalance</th></tr></thead><tbody><tr><td style="text-align:center">ABC</td><td style="text-align:center">12</td><td style="text-align:center">My_Rule</td><td style="text-align:center">true</td><td style="text-align:center">null</td><td style="text-align:center">null</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">DEF</td><td style="text-align:center">100</td><td style="text-align:center">hr_2</td><td style="text-align:center">null</td><td style="text-align:center">null</td><td style="text-align:center">null</td><td style="text-align:center">null</td></tr><tr><td style="text-align:center">HIJ</td><td style="text-align:center">100</td><td style="text-align:center">HIJ</td><td style="text-align:center">null</td><td style="text-align:center">null</td><td style="text-align:center">null</td><td style="text-align:center">null</td></tr></tbody></table>
<ul>
<li><code>ds_invalid</code></li>
</ul>
<table><thead><tr><th style="text-align:center">id</th><th style="text-align:center">Me</th><th style="text-align:center">ruleid</th><th style="text-align:center">errorcode</th><th style="text-align:center">errorlevel</th><th style="text-align:center">imbalance</th></tr></thead><tbody><tr><td style="text-align:center">HIJ</td><td style="text-align:center">100</td><td style="text-align:center">HIJ</td><td style="text-align:center">HIJ is not H + I - J</td><td style="text-align:center">10</td><td style="text-align:center">1</td></tr></tbody></table>]]></content:encoded>
            <category>Trevas</category>
        </item>
        <item>
            <title><![CDATA[Trevas Batch 0.1.1]]></title>
            <link>https://trevas.info/Trevas/zh-CN/blog/trevas-batch-0.1.1</link>
            <guid>https://trevas.info/Trevas/zh-CN/blog/trevas-batch-0.1.1</guid>
            <pubDate>Sun, 02 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Trevas Batch 0.1.1 uses version 1.0.2 of Trevas.]]></description>
            <content:encoded><![CDATA[<p><a href="https://github.com/Making-Sense-Info/Trevas-Batch" target="_blank" rel="noopener noreferrer">Trevas Batch</a> <code>0.1.1</code> uses version <code>1.0.2</code> of <a href="https://github.com/InseeFr/Trevas" target="_blank" rel="noopener noreferrer">Trevas</a>.</p>
<p>This Java batch provides Trevas execution metrics in Spark mode.</p>
<p>The configuration file to fill in is described in the <a href="https://github.com/Making-Sense-Info/Trevas-Batch/tree/main#readme" target="_blank" rel="noopener noreferrer">README</a> of the project.
Launching the batch will produce a Markdown file as output.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="launch">Launch<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-batch-0.1.1#launch" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="local">Local<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-batch-0.1.1#local" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">java </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">jar trevas</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">batch</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token number" style="color:rgb(247, 140, 108)">0.1</span><span class="token number" style="color:rgb(247, 140, 108)">.1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">jar </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token class-name" style="color:rgb(255, 203, 107)">Dconfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"..."</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token class-name" style="color:rgb(255, 203, 107)">Dreport</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"..."</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The java execution will be done in local Spark.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes">Kubernetes<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-batch-0.1.1#kubernetes" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<p>Default Kubernetes objects are defined in the <a href="https://github.com/Making-Sense-Info/Trevas-Batch/tree/main/.kubernetes" target="_blank" rel="noopener noreferrer">.kubernetes</a> folder.</p>
<p>Feed the <code>config-map.yml</code> file then launch the job in your cluster.</p>]]></content:encoded>
            <category>Trevas Batch</category>
        </item>
        <item>
            <title><![CDATA[Trevas Jupyter 0.3.2]]></title>
            <link>https://trevas.info/Trevas/zh-CN/blog/trevas-jupyter-0.3.2</link>
            <guid>https://trevas.info/Trevas/zh-CN/blog/trevas-jupyter-0.3.2</guid>
            <pubDate>Sat, 01 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Trevas Jupyter 0.3.2 uses version 1.0.2 of Trevas.]]></description>
            <content:encoded><![CDATA[<p><a href="https://github.com/InseeFrLab/Trevas-Jupyter" target="_blank" rel="noopener noreferrer">Trevas Jupyter</a> <code>0.3.2</code> uses version <code>1.0.2</code> of <a href="https://github.com/InseeFr/Trevas" target="_blank" rel="noopener noreferrer">Trevas</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="news">News<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-jupyter-0.3.2#news" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<p>In addition to the <a href="https://trevas.info/Trevas/zh-CN/user-guide/coverage">VTL coverage</a> greatly increased since the publication of Trevas 1.x.x, Trevas Jupyter offers 1 new connector:</p>
<ul>
<li>SAS files (via the <code>loadSas</code> method)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="launch">Launch<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-jupyter-0.3.2#launch" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="manually-adding-the-trevas-kernel-to-an-existing-jupyter-instance">Manually adding the Trevas Kernel to an existing Jupyter instance<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-jupyter-0.3.2#manually-adding-the-trevas-kernel-to-an-existing-jupyter-instance" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<ul>
<li>Trevas Jupyter compiler</li>
<li>Copy the <code>kernel.json</code> file and the <code>bin</code> and <code>repo</code> folders to a new kernel folder.</li>
<li>Edit the <code>kernel.json</code> file</li>
<li>Launch Jupyter</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="docker">Docker<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-jupyter-0.3.2#docker" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker pull inseefrlab/trevas-jupyter:0.3.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -p 8888:8888 inseefrlab/trevas-jupyter:0.3.2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="helm">Helm<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-jupyter-0.3.2#helm" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<p>The Trevas Jupyter docker image can be instantiated via the <code>jupyter-pyspark</code> Helm contract from <a href="https://github.com/InseeFrLab/helm-charts-interactive-services/tree/main" target="_blank" rel="noopener noreferrer">InseeFrLab</a>.</p>]]></content:encoded>
            <category>Trevas Jupyter</category>
        </item>
        <item>
            <title><![CDATA[Trevas Lab 0.3.3]]></title>
            <link>https://trevas.info/Trevas/zh-CN/blog/trevas-lab-0.3.3</link>
            <guid>https://trevas.info/Trevas/zh-CN/blog/trevas-lab-0.3.3</guid>
            <pubDate>Sat, 01 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Trevas Lab 0.3.3 uses version 1.0.2 of Trevas.]]></description>
            <content:encoded><![CDATA[<p><a href="https://github.com/InseeFrLab/Trevas-Lab" target="_blank" rel="noopener noreferrer">Trevas Lab</a> <code>0.3.3</code> uses version <code>1.0.2</code> of <a href="https://github.com/InseeFr/Trevas" target="_blank" rel="noopener noreferrer">Trevas</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="news">News<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-lab-0.3.3#news" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<p>In addition to the <a href="https://trevas.info/Trevas/zh-CN/user-guide/coverage">VTL coverage</a> greatly increased since the publication of Trevas 1.x.x, Trevas Lab offers 2 new connectors:</p>
<ul>
<li>SAS files</li>
<li>JDBC MariaDB</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="launch">Launch<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-lab-0.3.3#launch" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes">Kubernetes<a href="https://trevas.info/Trevas/zh-CN/blog/trevas-lab-0.3.3#kubernetes" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<p>Sample Kubernetes objects are available in the <code>.kubernetes</code> folders of <a href="https://github.com/InseeFrLab/Trevas-Lab/tree/master/.kubernetes" target="_blank" rel="noopener noreferrer">Trevas Lab</a> and <a href="https://github.com/InseeFrLab/Trevas-Lab-UI/tree/master/.kubernetes" target="_blank" rel="noopener noreferrer">Trevas Lab UI</a>.</p>]]></content:encoded>
            <category>Trevas Lab</category>
        </item>
    </channel>
</rss>