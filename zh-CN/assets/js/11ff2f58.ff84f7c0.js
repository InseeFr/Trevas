"use strict";(self.webpackChunktrevas_documentation=self.webpackChunktrevas_documentation||[]).push([[8202],{38786:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"developer-guide/dag","title":"DAG (Directed acyclic graph) - Statement reordering","description":"Statement reordering","source":"@site/docs/developer-guide/dag.mdx","sourceDirName":"developer-guide","slug":"/developer-guide/dag","permalink":"/Trevas/zh-CN/developer-guide/dag","draft":false,"unlisted":false,"editUrl":null,"tags":[],"version":"current","lastUpdatedAt":1766837534000,"frontMatter":{"id":"dag","title":"DAG (Directed acyclic graph) - Statement reordering","sidebar_label":"DAG - Statement reordering","slug":"/developer-guide/dag","custom_edit_url":null},"sidebar":"docs","previous":{"title":"Javadoc","permalink":"/Trevas/zh-CN/developer-guide/javadoc"},"next":{"title":"\u6982\u8ff0","permalink":"/Trevas/zh-CN/developer-guide/basic-mode"}}');var i=r(74848),d=r(28453);const a={id:"dag",title:"DAG (Directed acyclic graph) - Statement reordering",sidebar_label:"DAG - Statement reordering",slug:"/developer-guide/dag",custom_edit_url:null},s=void 0,o={},c=[{value:"Statement reordering",id:"statement-reordering",level:3},{value:"Activate reordering",id:"activate-reordering",level:3}];function l(e){const n={code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h3,{id:"statement-reordering",children:"Statement reordering"}),"\n",(0,i.jsx)(n.p,{children:"Suppose we have two Transformations:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Create an intermediate dataset ",(0,i.jsx)(n.code,{children:"DS_np"})]}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"DS_np"})," to calculate another dataset ",(0,i.jsx)(n.code,{children:"DS_p"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:'Even if we write them in "reverse" order, the VTL standard requires executing them in the correct dependency order.'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"-- Transformation Scheme Example\n\n-- (i) This depends on DS_np\nDS_p <- if DS_np >= 0 then DS_np else DS_1;\n\n-- (ii) This produces DS_np\nDS_np := (DS_1 - DS_2) * 2;\n"})}),"\n",(0,i.jsx)(n.p,{children:"Execution Order (resolved by the engine)"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"(ii) must run first because DS_np is required before evaluating (i)."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"(i) runs afterwards, since it consumes DS_np."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["So even though we wrote (i) before (ii), the engine reorders them automatically, ",(0,i.jsx)(n.strong,{children:"when reordering is activated"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"activate-reordering",children:"Activate reordering"}),"\n",(0,i.jsxs)(n.p,{children:["The current behavior of Trevas is that statement reordering is ",(0,i.jsx)(n.strong,{children:"activated per default"}),", as this is the behavior required by the VTL standard.\nStatement reordering can be ",(0,i.jsx)(n.strong,{children:"deactivated"}),' via the following config flag ("$vtl.engine.use_dag")']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'ScriptEngine engine = new ScriptEngineManager().getEngineByName("vtl");\nengine.put("$vtl.engine.use_dag", "false");\n'})})]})}function u(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>s});var t=r(96540);const i={},d=t.createContext(i);function a(e){const n=t.useContext(d);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(d.Provider,{value:n},e.children)}}}]);