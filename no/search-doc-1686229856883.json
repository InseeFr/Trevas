[{"title":"Modifikasjoner av VTL-grammatikk","type":0,"sectionRef":"#","url":"/Trevas/no/administrator-guide/grammar","content":"","keywords":""},{"title":"Bruke VTL-grammatikken​","type":1,"pageTitle":"Modifikasjoner av VTL-grammatikk","url":"/Trevas/no/administrator-guide/grammar#bruke-vtl-grammatikken","content":"Trevas er avhengig av den formelle grammatikken til VTL uttrykt som EBNF. La référence est l'upgrade de la version 2.0 publiée en juillet 2020 sur le site web SDMX. Grammatikken består av to filer klare til å bli behandlet av Antlr parsergeneratoren : VtlTokens.g4 inneholder listen over gyldige VTL-termer. Vtl.g4 inneholder regler som lager gyldige VTL-uttrykk. Antlr bruker disse filene til å produsere en lexer, som lager en liste over ordforrådssymboler fra en input-tegnstrøm, og en parser, som lager den grammatiske strukturen som tilsvarer denne listen over symboler. Antlr kan generere parsere som kan brukes på forskjellige målspråk. Trevas bruker parseren for Java, som er eksponert i vtl-parser modulen. "},{"title":"Grammatikktilpasninger​","type":1,"pageTitle":"Modifikasjoner av VTL-grammatikk","url":"/Trevas/no/administrator-guide/grammar#grammatikktilpasninger","content":"For å forbedre ytelsen og funksjonaliteten er det gjort mindre endringer i VTL-grammatikken som brukes i Trevas. Forenkling av det grammatiske treet​ Som dokumentert her og her, expr og exprComp grenene til grammatikktreet er nesten identiske. For å unngå å måtte implementere den samme logikken to ganger, ble exprComp grenen kommentert ut av commit 498c1f8. Det ble senere lagt merke til at denne modifikasjonen feilaktig ugyldiggjorde COUNT() uttrykket, og den tilsvarende regelen ble derfor gjeninnført i grammatikken av commit 54f86f2. Tilsetting av avstandsoperatører​ Avstandsoperatører som Levenshtein eller Jaro-Winkler brukes ofte i strengtesting. For å tillate dem i VTL-uttrykk, commit 036dc60 lagt til en del i grammatikken distanceOperators som inneholder en LEVENSHTEIN regel, samt LEVENSHTEIN symbolet i lexer-filen. "},{"title":"Utviklerveiledning","type":0,"sectionRef":"#","url":"/Trevas/no/developer-guide","content":"","keywords":""},{"title":"Importer Trevas motoren​","type":1,"pageTitle":"Utviklerveiledning","url":"/Trevas/no/developer-guide#importer-trevas-motoren","content":"&lt;dependency&gt; &lt;groupId&gt;fr.insee.trevas&lt;/groupId&gt; &lt;artifactId&gt;vtl-engine&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;/dependency&gt;  "},{"title":"Instantier Trevas motoren​","type":1,"pageTitle":"Utviklerveiledning","url":"/Trevas/no/developer-guide#instantier-trevas-motoren","content":"// Start engine ScriptEngine engine = new ScriptEngineManager().getEngineByName(&quot;vtl&quot;); // Add input bindings to engine Bindings bindings = new SimpleBindings(); bindings.put(&quot;a&quot;, 1); engine.setBindings(b, ScriptContext.ENGINE_SCOPE); // Execute script try { engine.eval(&quot;b := a + 1;&quot;); } catch (VtlScriptException e) { logger.warn(&quot;Eval failed: &quot;, e); } // Get result Long result = (Long) engine.getBindings(ScriptContext.ENGINE_SCOPE).get(&quot;b&quot;);  "},{"title":"Utførelsesmodus​","type":1,"pageTitle":"Utviklerveiledning","url":"/Trevas/no/developer-guide#utførelsesmodus","content":"Grunnleggende mote Spark modus "},{"title":"Grunnleggende modus - Datakilder","type":0,"sectionRef":"#","url":"/Trevas/no/developer-guide/basic-mode/data-sources","content":"","keywords":""},{"title":"Beste praksis Trevas​","type":1,"pageTitle":"Grunnleggende modus - Datakilder","url":"/Trevas/no/developer-guide/basic-mode/data-sources#beste-praksis-trevas","content":"JSON format er den eneste måten å lagre og administrere VTL-metadata når Trevas-motoren instansieres i basismodus. Det anbefales derfor sterkt å bruke dette formatet. JDBC JSON Andre "},{"title":"Grunnleggende modus","type":0,"sectionRef":"#","url":"/Trevas/no/developer-guide/basic-mode","content":"","keywords":""},{"title":"InMemoryDataset​","type":1,"pageTitle":"Grunnleggende modus","url":"/Trevas/no/developer-guide/basic-mode#inmemorydataset","content":"InMemoryDataset datasett brukes til å representere statistiske tabeller i en Java-applikasjon. "},{"title":"Eksempel​","type":1,"pageTitle":"Grunnleggende modus","url":"/Trevas/no/developer-guide/basic-mode#eksempel","content":"ScriptEngine engine = new ScriptEngineManager().getEngineByName(&quot;vtl&quot;); Bindings bindings = new SimpleBindings(); InMemoryDataset dataset = new InMemoryDataset( List.of( Map.of(&quot;var1&quot;, &quot;x&quot;, &quot;var2&quot;, &quot;y&quot;, &quot;var3&quot;, 5), Map.of(&quot;var1&quot;, &quot;xx&quot;, &quot;var2&quot;, &quot;yy&quot;, &quot;var3&quot;, 10) ), Map.of(&quot;var1&quot;, String.class, &quot;var2&quot;, String.class, &quot;var3&quot;, Long.class), Map.of(&quot;var1&quot;, Role.IDENTIFIER, &quot;var2&quot;, Role.ATTRIBUTE, &quot;var3&quot;, Role.MEASURE) ); bindings.put(&quot;myDataset&quot;, dataset); engine.getContext().setBindings(bindings, ScriptContext.ENGINE_SCOPE); String script = &quot;res := myDataset[filter var3 &gt; 6];&quot;; try { engine.eval(script); } catch (ScriptException e) { e.printStackTrace(); } Bindings outputBindings = engine.getContext().getBindings(ScriptContext.ENGINE_SCOPE); InMemoryDataset result = (InMemoryDataset) outputBindings.get(&quot;res&quot;); System.out.println(result.getDataPoints().size()); // 1  "},{"title":"Grunnleggende modus - JDBC-kilde","type":0,"sectionRef":"#","url":"/Trevas/no/developer-guide/basic-mode/data-sources/jdbc","content":"","keywords":""},{"title":"Importer JDBC-modul fra Trevas​","type":1,"pageTitle":"Grunnleggende modus - JDBC-kilde","url":"/Trevas/no/developer-guide/basic-mode/data-sources/jdbc#importer-jdbc-modul-fra-trevas","content":"&lt;dependency&gt; &lt;groupId&gt;fr.insee.trevas&lt;/groupId&gt; &lt;artifactId&gt;vtl-jdbc&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;/dependency&gt;  "},{"title":"Bruke vtl-jdbc modulen​","type":1,"pageTitle":"Grunnleggende modus - JDBC-kilde","url":"/Trevas/no/developer-guide/basic-mode/data-sources/jdbc#bruke-vtl-jdbc-modulen","content":"connection = DriverManager.getConnection(...); Statement statement = connection.createStatement(); JDBCDataset jdbcDataset = new JDBCDataset(() -&gt; { try { return statement.executeQuery(&quot;select * from ds1;&quot;); } catch (SQLException se) { throw new RuntimeException(se); } });  "},{"title":"Grunnleggende modus - JSON-kilde","type":0,"sectionRef":"#","url":"/Trevas/no/developer-guide/basic-mode/data-sources/json","content":"","keywords":""},{"title":"Importer jackson-modul fra Trevas​","type":1,"pageTitle":"Grunnleggende modus - JSON-kilde","url":"/Trevas/no/developer-guide/basic-mode/data-sources/json#importer-jackson-modul-fra-trevas","content":"&lt;dependency&gt; &lt;groupId&gt;fr.insee.trevas&lt;/groupId&gt; &lt;artifactId&gt;vtl-jackson&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;/dependency&gt;  "},{"title":"Schéma​","type":1,"pageTitle":"Grunnleggende modus - JSON-kilde","url":"/Trevas/no/developer-guide/basic-mode/data-sources/json#schéma","content":"JSON-representasjonen av et Datasett er definert som : { &quot;dataStructure&quot;: [ { &quot;name&quot;: &quot;id&quot;, &quot;type&quot;: &quot;STRING&quot;, &quot;role&quot;: &quot;IDENTIFIER&quot; }, { &quot;name&quot;: &quot;x&quot;, &quot;type&quot;: &quot;INTEGER&quot;, &quot;role&quot;: &quot;MEASURE&quot; }, { &quot;name&quot;: &quot;y&quot;, &quot;type&quot;: &quot;FLOAT&quot;, &quot;role&quot;: &quot;MEASURE&quot; } ], &quot;dataPoints&quot;: [ [&quot;0001&quot;, 10, 50.5], [&quot;0002&quot;, 20, -8], [&quot;0003&quot;, 1000, 0], [&quot;0004&quot;, 1, 4.5] ] }  "},{"title":"Bruke vtl-jackson modulen​","type":1,"pageTitle":"Grunnleggende modus - JSON-kilde","url":"/Trevas/no/developer-guide/basic-mode/data-sources/json#bruke-vtl-jackson-modulen","content":"Global uttalelse​ Modulen kan deklareres globalt på klientprosjektnivå. public ObjectMapper objectMapper() { return new ObjectMapper() .registerModule(new TrevasModule()); }  Eksempel på deserialisering​ ObjectMapper objectMapper = new ObjectMapper(); objectMapper.readValue(json, Dataset.class);  "},{"title":"Grunnleggende modus - Andre kilder","type":0,"sectionRef":"#","url":"/Trevas/no/developer-guide/basic-mode/data-sources/others","content":"","keywords":""},{"title":"InMemoryDataset bygger​","type":1,"pageTitle":"Grunnleggende modus - Andre kilder","url":"/Trevas/no/developer-guide/basic-mode/data-sources/others#inmemorydataset-bygger","content":"InMemoryDataset dataset = new InMemoryDataset( List.of( Map.of(&quot;var1&quot;, &quot;x&quot;, &quot;var2&quot;, &quot;y&quot;, &quot;var3&quot;, 5), Map.of(&quot;var1&quot;, &quot;xx&quot;, &quot;var2&quot;, &quot;yy&quot;, &quot;var3&quot;, 10) ), Map.of(&quot;var1&quot;, String.class, &quot;var2&quot;, String.class, &quot;var3&quot;, Long.class), Map.of(&quot;var1&quot;, Role.IDENTIFIER, &quot;var2&quot;, Role.ATTRIBUTE, &quot;var3&quot;, Role.MEASURE) );  "},{"title":"SPark modus - Datakilder","type":0,"sectionRef":"#","url":"/Trevas/no/developer-guide/spark-mode/data-sources","content":"","keywords":""},{"title":"Beste praksis Trevas​","type":1,"pageTitle":"SPark modus - Datakilder","url":"/Trevas/no/developer-guide/spark-mode/data-sources#beste-praksis-trevas","content":"Apache Parquetformat er den eneste måten å lagre og administrere VTL-metadata når Trevas-motoren instansieres i Spark-modus. Det anbefales derfor sterkt å bruke dette formatet. "},{"title":"Eksempler​","type":1,"pageTitle":"SPark modus - Datakilder","url":"/Trevas/no/developer-guide/spark-mode/data-sources#eksempler","content":"Apache Parquet CSV JDBC Andre "},{"title":"Spark modus - CSV-kilde","type":0,"sectionRef":"#","url":"/Trevas/no/developer-guide/spark-mode/data-sources/csv","content":"","keywords":""},{"title":"Lesning​","type":1,"pageTitle":"Spark modus - CSV-kilde","url":"/Trevas/no/developer-guide/spark-mode/data-sources/csv#lesning","content":"Dataset&lt;Row&gt; sparkDataset = spark.read() .option(&quot;delimiter&quot;, &quot;;&quot;) .option(&quot;header&quot;, &quot;true&quot;) .csv(&quot;folder_path&quot;); SparkDataset dataset = new SparkDataset(sparkDataset);  Se alle støttede alternativer i den offisielle dokumentasjonen. "},{"title":"Skriving​","type":1,"pageTitle":"Spark modus - CSV-kilde","url":"/Trevas/no/developer-guide/spark-mode/data-sources/csv#skriving","content":"CSV-format anbefales ikke for å skrive Trevas Dataset (se her) "},{"title":"Spark modus","type":0,"sectionRef":"#","url":"/Trevas/no/developer-guide/spark-mode","content":"","keywords":""},{"title":"SparkDataset​","type":1,"pageTitle":"Spark modus","url":"/Trevas/no/developer-guide/spark-mode#sparkdataset","content":"SparkDataset datasett brukes til å representere statistiske tabeller i en Java-applikasjon som bruker Trevas i Spark-modus. "},{"title":"Importer Spark-modul fra Trevas​","type":1,"pageTitle":"Spark modus","url":"/Trevas/no/developer-guide/spark-mode#importer-spark-modul-fra-trevas","content":"&lt;dependency&gt; &lt;groupId&gt;fr.insee.trevas&lt;/groupId&gt; &lt;artifactId&gt;vtl-spark&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;/dependency&gt;  "},{"title":"Session Spark​","type":1,"pageTitle":"Spark modus","url":"/Trevas/no/developer-guide/spark-mode#session-spark","content":"For å kjøre VTL via Trevas i Spark-modus, må du instansiere en Spark-økt. Økten kan være : lokal (kjører på Java-serveren)statisk (kjører på en Spark-forekomst som tidligere er installert på en server)dynamisk (kjører dynamisk i en Kubernetes-klynge) SparkSession spark = SparkSession.builder().master(&quot;local&quot;).getOrCreate();  "},{"title":"Eksempel​","type":1,"pageTitle":"Spark modus","url":"/Trevas/no/developer-guide/spark-mode#eksempel","content":"ScriptEngine engine = new ScriptEngineManager().getEngineByName(&quot;vtl&quot;); Bindings bindings = new SimpleBindings(); SparkDataset dataset = new SparkDataset(spark.read().parquet(&quot;folder_path&quot;)); bindings.put(&quot;myDataset&quot;, dataset); engine.getContext().setBindings(bindings, ScriptContext.ENGINE_SCOPE); engine.put(&quot;$vtl.engine.processing_engine_names&quot;, &quot;spark&quot;); engine.put(&quot;$vtl.spark.session&quot;, spark); String script = &quot;res := myDataset[filter var3 &gt; 6];&quot;; try { engine.eval(script); } catch (ScriptException e) { e.printStackTrace(); } Bindings outputBindings = engine.getContext().getBindings(ScriptContext.ENGINE_SCOPE); SparkDataset result = (SparkDataset) outputBindings.get(&quot;res&quot;);  "},{"title":"Distribuert utførelse​","type":1,"pageTitle":"Spark modus","url":"/Trevas/no/developer-guide/spark-mode#distribuert-utførelse","content":"Enten i statisk eller dynamisk modus, den distribuerte utførelse av prosessering krever at eksekutørene instansiert av masteren er i stand til å løse VTL-behandlingen. Det er da nødvendig å gi Trevas-krukkene til utførerne via spark.jars alternativet til SparkConf objektet : SparkSession.Builder sparkBuilder = SparkSession.builder() SparkConf conf = new SparkConf(); conf.set(&quot;spark.jars&quot;, String.join(&quot;,&quot;, &quot;/vtl-spark.jar&quot;, &quot;/vtl-model.jar&quot;, &quot;/vtl-parser.jar&quot;, &quot;/vtl-engine.jar&quot;, )); sparkBuilder.config(conf); ... SparkSession spark = sparkBuilder.getOrCreate();  "},{"title":"Kjører i en Kubernetes klynge​","type":1,"pageTitle":"Spark modus","url":"/Trevas/no/developer-guide/spark-mode#kjører-i-en-kubernetes-klynge","content":"Mange alternativer er beskrevet i den offisielle dokumentasjonen Blant disse er ett alternativ spesielt viktig: Docker-bildet som vil tillate eksekutører å løse VTL-behandling. Et tilpasset bilde er tilgjengelig her. SparkSession.Builder sparkBuilder = SparkSession.builder() SparkConf conf = new SparkConf(); conf.set(&quot;spark.kubernetes.container.image&quot;, &quot;inseefrlab/spark-hadoop:trevas-0.4.7-spark-3.2.1-hadoop-3.3.1-postgresql-42.3.3-postgis-2021.1.0&quot;); conf.set(&quot;spark.kubernetes.container.pullPolicy&quot;, &quot;IfNotPresent&quot;); sparkBuilder.config(conf); sparkBuilder.master(&quot;k8s://...&quot;) ... SparkSession spark = sparkBuilder.getOrCreate();  "},{"title":"Spark modus - JDBC-kilde","type":0,"sectionRef":"#","url":"/Trevas/no/developer-guide/spark-mode/data-sources/jdbc","content":"","keywords":""},{"title":"Lesning​","type":1,"pageTitle":"Spark modus - JDBC-kilde","url":"/Trevas/no/developer-guide/spark-mode/data-sources/jdbc#lesning","content":"Dataset&lt;Row&gt; sparkDataset = spark.read() .format(&quot;jdbc&quot;) .option(&quot;url&quot;, &quot;myUrl&quot;) .option(&quot;user&quot;, &quot;myUser&quot;) .option(&quot;password&quot;, &quot;myPwd&quot;) .option(&quot;query&quot;, &quot;myQuery&quot;) .option(&quot;driver&quot;, &quot;org.postgresql.Driver&quot;) .load(); SparkDataset dataset = new SparkDataset(sparkDataset);  I dette eksemplet må prosjektet inneholde postgresql-driveravhengigheten &lt;dependency&gt; &lt;groupId&gt;org.postgresql&lt;/groupId&gt; &lt;artifactId&gt;postgresql&lt;/artifactId&gt; &lt;version&gt;42.5.1&lt;/version&gt; &lt;/dependency&gt;  Se alle støttede alternativer i den offisielle dokumentasjonen. "},{"title":"Skriving​","type":1,"pageTitle":"Spark modus - JDBC-kilde","url":"/Trevas/no/developer-guide/spark-mode/data-sources/jdbc#skriving","content":"JDBC-formatet anbefales ikke for å skrive Dataset Trevas (se her) "},{"title":"Spark modus - Parquet-kilde","type":0,"sectionRef":"#","url":"/Trevas/no/developer-guide/spark-mode/data-sources/parquet","content":"","keywords":""},{"title":"Metadata​","type":1,"pageTitle":"Spark modus - Parquet-kilde","url":"/Trevas/no/developer-guide/spark-mode/data-sources/parquet#metadata","content":"Metadata for parkettdatasett utledes fra skjemaet. Slags​ Trevas konverterer mellom parketttyper og typer som støttes av Trevas-motoren. Roller​ VTL-roller legges til av Trevas til Parkett-skjemaet, ved å legge til en vtlRole metadata til hver feltbeskrivelse. Som standard vil kolonner uten rolle i Parkett-skjemaet ha rollen 'MEASURE' i Trevas. VTL lar roller utvikle seg innenfor skript (se her) "},{"title":"Lesning​","type":1,"pageTitle":"Spark modus - Parquet-kilde","url":"/Trevas/no/developer-guide/spark-mode/data-sources/parquet#lesning","content":"Dataset&lt;Row&gt; sparkDataset = spark.read().parquet(&quot;folder_path&quot;); SparkDataset dataset = new SparkDataset(sparkDataset);  "},{"title":"Skriving​","type":1,"pageTitle":"Spark modus - Parquet-kilde","url":"/Trevas/no/developer-guide/spark-mode/data-sources/parquet#skriving","content":"// Trevas Spark Dataset SparkDataset dataset = ...; // Spark Dataset Dataset&lt;Row&gt; sparkDataset = dataset.getSparkDataset(); sparkDataset.write() .mode(SaveMode.Overwrite) .parquet(&quot;folder_path&quot;);  "},{"title":"Trevas","type":0,"sectionRef":"#","url":"/Trevas/no/introduction","content":"","keywords":""},{"title":"Teknisk beskrivelse​","type":1,"pageTitle":"Trevas","url":"/Trevas/no/introduction#teknisk-beskrivelse","content":"Trevas leverer VTL-motorer for ulike driftsmiljøer, inkludert en Java 11-motor og en Apache Spark motor. Trevas-motorer er basert på JSR 223 spesifikasjonen som beskriver bruken av skriptspråk i Java. "},{"title":"Trevas moduler","type":0,"sectionRef":"#","url":"/Trevas/no/modules","content":"Trevas moduler VTL Engine Runtime-motor og dens grunnleggende Java-implementering VTL Parser Parser generert av Antlr fra VTL 2.0 formell grammatikk VTL Spark Utføre VTL-transformasjoner av Spark VTL Model Modell som definerer objektene som brukes i motoren VTL JDBC Bruke SQL-datakilder VTL Jackson JSON-serialisering / deserialisering av datasett","keywords":""},{"title":"Spark modus - Andre kilder","type":0,"sectionRef":"#","url":"/Trevas/no/developer-guide/spark-mode/data-sources/others","content":"","keywords":""},{"title":"SparkDataset bygger​","type":1,"pageTitle":"Spark modus - Andre kilder","url":"/Trevas/no/developer-guide/spark-mode/data-sources/others#sparkdataset-bygger","content":"StructType schema = DataTypes.createStructType(List.of( DataTypes.createStructField(&quot;string&quot;, DataTypes.StringType, false), DataTypes.createStructField(&quot;integer&quot;, DataTypes.LongType, false), DataTypes.createStructField(&quot;boolean&quot;, DataTypes.BooleanType, false), DataTypes.createStructField(&quot;float&quot;, DataTypes.DoubleType, false) )); Dataset&lt;Row&gt; dataFrame = spark.createDataFrame(List.of( RowFactory.create(&quot;string&quot;, 1L, true, 1.5D) ), schema); fr.insee.vtl.model.Dataset sparkDataset = new SparkDataset(dataFrame);  "},{"title":"Andre formater som støttes av Spark​","type":1,"pageTitle":"Spark modus - Andre kilder","url":"/Trevas/no/developer-guide/spark-mode/data-sources/others#andre-formater-som-støttes-av-spark","content":"Se den offisielle dokumentasjonen "},{"title":"VTL Jackson","type":0,"sectionRef":"#","url":"/Trevas/no/modules/jackson","content":"VTL Jackson Datasett JSON serialisering / deserialisering modul.","keywords":""},{"title":"VTL Engine","type":0,"sectionRef":"#","url":"/Trevas/no/modules/engine","content":"VTL Engine Runtime-motor og dens grunnleggende Java-implementering.","keywords":""},{"title":"VTL JDBC","type":0,"sectionRef":"#","url":"/Trevas/no/modules/jdbc","content":"VTL JDBC Verktøy for å jobbe med SQL-datakilder.","keywords":""},{"title":"VTL Model","type":0,"sectionRef":"#","url":"/Trevas/no/modules/model","content":"VTL Model Modell som definerer objektene som brukes i motoren.","keywords":""},{"title":"VTL Spark","type":0,"sectionRef":"#","url":"/Trevas/no/modules/spark","content":"VTL Spark Modul som tillater utførelse av VTL-transformasjoner av Spark.","keywords":""},{"title":"Trevas releases","type":0,"sectionRef":"#","url":"/Trevas/no/releases","content":"Trevas releases v1.x.x","keywords":""},{"title":"VTL Parser","type":0,"sectionRef":"#","url":"/Trevas/no/modules/parser","content":"VTL Parser Parser generert av Antlr fra VTL 2.0 formell grammatikk.","keywords":""},{"title":"Release 1.x.x","type":0,"sectionRef":"#","url":"/Trevas/no/releases/1.x.x","content":"","keywords":""},{"title":"Versjon 1.0.2 - 06/08/23​","type":1,"pageTitle":"Release 1.x.x","url":"/Trevas/no/releases/1.x.x#versjon-102---060823","content":"(Se teknisk utgivelse på Github) Fiks in / not_in feil med null "},{"title":"Versjon 1.0.1 - 05/23/23​","type":1,"pageTitle":"Release 1.x.x","url":"/Trevas/no/releases/1.x.x#versjon-101---052323","content":"(Se teknisk utgivelse på Github) Løs Spark-serialiseringsproblemet i implementeringen av check_datapoint "},{"title":"Versjon 1.0.0 - 05/12/23​","type":1,"pageTitle":"Release 1.x.x","url":"/Trevas/no/releases/1.x.x#versjon-100---051223","content":"(Se teknisk utgivelse på Github) Medlemskap: #Validering: check, check_datapointOperatører brukt på datasett (ceil(ds), ds1 &lt; ds2, mod(ds, 5), ...) "},{"title":"VTL - Aggregerte operatører","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/coverage/aggregate-operators","content":"VTL - Aggregerte operatører Navn\tSymbol\tInMemory\tSparkSummon Aggregate ✔️\t✔️ Telle antall datapunkter\tcount\t✔️\t✔️ Minimumsverdi\tmin\t✔️\t✔️ Maksimal verdi\tmax\t✔️\t✔️ Medianverdi\tmedian\t✔️\t✔️ Sum\tsum\t✔️\t✔️ Gjennomsnittlig verdi\tavg\t✔️\t✔️ Populasjonsstandardavvik\tstddev_pop\t✔️\t✔️ Eksempel på standardavvik\tstddev_samp\t✔️\t✔️ Varianspopulasjon\tvar_pop\t✔️\t✔️ Prøveavvik\tvar_samp\t✔️\t✔️","keywords":""},{"title":"VTL - Analytiske operatører","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/coverage/analytic-operators","content":"VTL - Analytiske operatører Navn\tSymbol\tInMemory\tSparkAnalytisk påkalling ❌\t✔️ Telle antall datapunkter\tcount\t❌\t✔️ Minimumsverdi\tmin\t❌\t✔️ Maksimal verdi\tmax\t❌\t✔️ Medianverdi\tmedian\t❌\t✔️ Sum\tsum\t❌\t✔️ Gjennomsnittlig verdi\tavg\t❌\t✔️ Populasjonsstandardavvik\tstddev_pop\t❌\t✔️ Eksempel på standardavvik\tstddev_samp\t❌\t✔️ Varianspopulasjon\tvar_pop\t❌\t✔️ Prøveavvik\tvar_samp\t❌\t✔️ Førsteverdi\tfirst_value\t❌\t✔️ Siste verdi\tlast_value\t❌\t✔️ Lag\tlag\t❌\t✔️ Leder\tlead\t❌\t✔️ Rangering\trank\t❌\t✔️ Forhold til rapportering\tratio_to_report\t❌\t✔️","keywords":""},{"title":"VTL - Boolske operatorer","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/coverage/boolean-operators","content":"VTL - Boolske operatorer Navn\tSymbol\tBoolean\tComponent\tDatasetLogisk konjunksjon\tand\t✔️\t✔️\t✔️ Logisk disjunksjon\tor\t✔️\t✔️\t✔️ Eksklusiv disjunksjon\txor\t✔️\t✔️\t✔️ Logisk fornektelse\tnot\t✔️\t✔️\t✔️","keywords":""},{"title":"Trevas VTL dekning","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/coverage","content":"Trevas VTL dekning Generelle operatører Bli med operatører Strengeoperatorer Numeriske operatorer Sammenligningsoperatører Boolske operatorer Tidsoperatører Still inn operatører Hierarkisk aggregering Samlede operatører Analytiske operatører Datavalideringsoperatører Betingede operatører Klausuloperatører","keywords":""},{"title":"VTL - Klausuloperatører","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/coverage/clause-operators","content":"VTL - Klausuloperatører Navn\tSymbol\tInMemory\tSparkFiltrere datapunkter\tfilter\t✔️\t✔️ Beregning av en komponent\tcalc\t✔️\t✔️ Aggregasjon\taggr\t❌\t✔️ Vedlikeholde komponenter\tkeep\t✔️\t✔️ Fjerning av komponenter\tdrop\t✔️\t✔️ Endring av komponentnavn\trename\t✔️\t✔️ Pivoting\tpivot\t❌\t❌ Fjerner pivotering\tunpivot\t❌\t❌ Underrom\tsub\t❌\t❌","keywords":""},{"title":"VTL - Betingede operatører","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/coverage/conditional-operators","content":"VTL - Betingede operatører Navn\tSymbol\tBoolean\tComponent\tDatasetOm så annet\tif-then-else\t✔️\t✔️\t✔️ Null verdi\tnvl\t✔️\t✔️\t✔️","keywords":""},{"title":"VTL - Sammenligningsoperatører","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/coverage/comparison-operators","content":"VTL - Sammenligningsoperatører Navn\tSymbol\tScalar\tComponent\tDatasetLik\t=\t✔️\t✔️\t✔️ Ikke lik\t&lt;&gt;\t✔️\t✔️\t✔️ Større enn\t&gt;\t✔️\t✔️\t✔️ Mindre enn\t&lt;\t✔️\t✔️\t✔️ Større eller lik\t&gt; =\t✔️\t✔️\t✔️ Mindre eller lik\t&lt;=\t✔️\t✔️\t✔️ Mellom\tbetween\t✔️\t✔️\t✔️ Element av\tin / not_in\t✔️\t✔️\t✔️ Match tegn\tmatch_characters\t✔️\t✔️\t✔️ Er null\tisnull\t✔️\t✔️\t✔️ Finnes i\texists_in\tN/A\tN/A\t❌","keywords":""},{"title":"VTL - Datavalideringsoperatører","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/coverage/data-validation-operators","content":"VTL - Datavalideringsoperatører Navn\tSymbol\tSupportedSjekk datapunktet\tcheck_datapoint\t✔️ Sjekk hierarki\tcheck_hierarchy\t❌ Sjekk\tcheck\t✔️","keywords":""},{"title":"VTL - Generelle operatører","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/coverage/general-operators","content":"VTL - Generelle operatører Navn\tSymbol\tSupportedParenteser\t( )\t✔️ Vedvarende oppdrag\t&lt;-\t❌ Midlertidig oppdrag\t:=\t✔️ Medlemskap\t#\t✔️ Brukerdefinert operatøranrop ✔️ Evaluering av ekstern rutine\teval\t❌ Typekonvertering (streng, heltall, dobbel, boolsk)\tcast\t✔️ Typekonvertering (andre)\tcast\t❌","keywords":""},{"title":"VTL - Bli med operatører","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/coverage/join-operators","content":"VTL - Bli med operatører Navn\tSymbol\tInMemory\tSparkBli med\tinner_join, left_join, full_join, cross_join\t✔️\t✔️","keywords":""},{"title":"VTL - Hierarkisk aggregering","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/coverage/hierarchical-aggregation","content":"VTL - Hierarkisk aggregering Navn\tSymbol\tInMemory\tSparkHierarkisk opprulling\thierarchy\t❌\t❌","keywords":""},{"title":"VTL - Still inn operatører","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/coverage/set-operators","content":"VTL - Still inn operatører Navn\tSymbol\tInMemory\tSparkUnion\tunion\t❌\t✔️ Kryss\tintersect\t❌\t❌ Sett forskjell\tsetdiff\t❌\t❌ Symmetrisk forskjell\tsymdiff\t❌\t❌","keywords":""},{"title":"VTL - Numeriske operatorer","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/coverage/numeric-operators","content":"VTL - Numeriske operatorer Navn\tSymbol\tNumber\tComponent\tDatasetUnært pluss\t+\t✔️\t✔️\t✔️ Unær minus\t-\t✔️\t✔️\t✔️ Tillegg\t+\t✔️\t✔️\t✔️ Subtraksjon\t-\t✔️\t✔️\t✔️ Multiplikasjon\t*\t✔️\t✔️\t✔️ Divisjon\t/\t✔️\t✔️\t✔️ Sammenkobling\t||\t✔️\t✔️\t✔️ Modulo\tmod\t✔️\t✔️\t✔️ Avrunding\tround\t✔️\t✔️\t✔️ Trunkering\ttrunc\t✔️\t✔️\t✔️ Tak\tceil\t✔️\t✔️\t✔️ Gulv\tfloor\t✔️\t✔️\t✔️ Absolutt verdi\tabs\t✔️\t✔️\t✔️ Eksponentiell\texp\t✔️\t✔️\t✔️ Naturlig logaritme\tln\t✔️\t✔️\t✔️ Strøm\tpower\t✔️\t✔️\t✔️ Logaritme\tlog\t✔️\t✔️\t✔️ Kvadratrot\tsqrt\t✔️\t✔️\t✔️","keywords":""},{"title":"VTL - Strengeoperatorer","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/coverage/string-operators","content":"VTL - Strengeoperatorer Navn\tSymbol\tString\tComponent\tDatasetStrengesammenkobling\t||\t✔️\t✔️\t✔️ Fjerning av mellomrom\ttrim, rtrim, ltrim\t✔️\t✔️\t✔️ Konvertering av store og små bokstaver\tupper/lower\t✔️\t✔️\t✔️ Sub-string ekstraksjon\tsubstr\t✔️\t✔️\t✔️ Utskifting av strengmønster\treplace\t✔️\t✔️\t✔️ Plassering av strengmønster\tinstr\t✔️\t✔️\t✔️ Strengelengde\tlength\t✔️\t✔️\t✔️","keywords":""},{"title":"VTL - Tidsoperatører","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/coverage/time-operators","content":"VTL - Tidsoperatører Navn\tSymbol\tTime_period\tComponent\tDatasetPeriodeindikator\tperiod_indicator\t❌\t❌\t❌ Fyll tidsserier\tfill_time_series\t❌\t❌\t❌ Flyt til lager\tflow_to_stock\t❌\t❌\t❌ Aksje til flyt\tstock_to_flow\t❌\t❌\t❌ Tidsforskyvning\ttimeshift\t❌\t❌\t❌ Tidsaggregering\ttime_agg\t❌\t❌\t❌ Faktisk tid\tcurrent_date\t✔️\tN/A\tN/A","keywords":""},{"title":"VTL","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/vtl","content":"","keywords":""},{"title":"Dokumentasjon​","type":1,"pageTitle":"VTL","url":"/Trevas/no/user-guide/vtl#dokumentasjon","content":"VTL-dokumentasjon er tilgjengelig på den offisielle nettsiden SDMX : BrukermanualReferansehåndbok "},{"title":"Datasett​","type":1,"pageTitle":"VTL","url":"/Trevas/no/user-guide/vtl#datasett","content":"VTL-datasett må beskrives med metadata. De forskjellige kolonnene har en type og en rolle. Som standard, i Trevas, vil en kolonne uten type eller rolle bli tildelt type string og rolle measure. Brukeren vil da ha muligheten til å mutere disse attributtene i skriptet sitt, spesielt via calc og cast operatorene. "},{"title":"Enkelt eksempel​","type":1,"pageTitle":"VTL","url":"/Trevas/no/user-guide/vtl#enkelt-eksempel","content":"Å vurdere ds_1 definerer som følger : \tid_1\tid_2\tme_1type\tstring\tstring\tstring role\tidentifier\tidentifier\tmeasure id_1\tid_2\tme_1&quot;75001&quot;\t&quot;75&quot;\t&quot;10&quot; &quot;75002&quot;\t&quot;75&quot;\t&quot;100&quot; &quot;70001&quot;\t&quot;70&quot;\t&quot;5&quot; &quot;70002&quot;\t&quot;70&quot;\t&quot;70&quot; For å få summen av meg_1 med id_2, er det nødvendig at bare id_2 har rollen identifikator, og at typen meg_1 er heltall. Vi bruker derfor følgende skript : ds_2 := ds_1[calc measure id_2 := id_2, me_1 := cast(me_1, integer)];  ds_2 er da : \tid_1\tid_2\tme_1type\tstring\tstring\tinteger role\tmeasure\tidentifier\tmeasure id_1\tid_2\tme_1&quot;75001&quot;\t&quot;75&quot;\t10 &quot;75002&quot;\t&quot;75&quot;\t100 &quot;70001&quot;\t&quot;70&quot;\t5 &quot;70002&quot;\t&quot;70&quot;\t70 Vi kan nå bruke aggr operatoren : ds_3 := ds_2[aggr sum_me_1 := sum(me_1) group by id_2];  Og få ds_3 : \tid_2\tsum_me_1type\tstring\tinteger role\tidentifier\tmeasure id_2\tme_1&quot;75&quot;\t110 &quot;70&quot;\t75 "},{"title":"Trevas klientapper","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/vtl/client-apps","content":"Trevas klientapper Trevas Jupyter Kernel Jupyter Trevas Lab Application web","keywords":""},{"title":"Trevas Jupyter","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/vtl/client-apps/jupyter","content":"","keywords":""},{"title":"Kilder​","type":1,"pageTitle":"Trevas Jupyter","url":"/Trevas/no/user-guide/vtl/client-apps/jupyter#kilder","content":"Github​ Trevas Jupyter Docker Hub​ Trevas Jupyter "},{"title":"Demo​","type":1,"pageTitle":"Trevas Jupyter","url":"/Trevas/no/user-guide/vtl/client-apps/jupyter#demo","content":"En video kommer snart "},{"title":"Trevas Jupyter","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/vtl/client-apps/lab","content":"","keywords":""},{"title":"Kilder​","type":1,"pageTitle":"Trevas Jupyter","url":"/Trevas/no/user-guide/vtl/client-apps/lab#kilder","content":"Github​ Trevas Lab UITrevas LabTrevas Spark Hadoop Docker Hub​ Trevas Lab UITrevas LabTrevas Spark Hadoop "},{"title":"Demo​","type":1,"pageTitle":"Trevas Jupyter","url":"/Trevas/no/user-guide/vtl/client-apps/lab#demo","content":"En video kommer snart "},{"title":"Sas vs VTL eksempler","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/vtl/sas-vtl","content":"Sas vs VTL eksempler Keep Drop Rename","keywords":""},{"title":"Keep","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/vtl/sas-vtl/keep","content":"Keep Sas VTL","keywords":""},{"title":"Drop","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/vtl/sas-vtl/drop","content":"Drop Sas VTL","keywords":""},{"title":"Rename","type":0,"sectionRef":"#","url":"/Trevas/no/user-guide/vtl/sas-vtl/rename","content":"Rename Sas VTL","keywords":""}]