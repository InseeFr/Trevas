"use strict";(self.webpackChunktrevas_documentation=self.webpackChunktrevas_documentation||[]).push([[5925],{3905:(e,r,t)=>{t.d(r,{Zo:()=>p,kt:()=>g});var a=t(7294);function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){n(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function m(e,r){if(null==e)return{};var t,a,n=function(e,r){if(null==e)return{};var t,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],r.indexOf(t)>=0||(n[t]=e[t]);return n}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var l=a.createContext({}),s=function(e){var r=a.useContext(l),t=r;return e&&(t="function"==typeof e?e(r):o(o({},r),e)),t},p=function(e){var r=s(e.components);return a.createElement(l.Provider,{value:r},e.children)},d="mdxType",k={inlineCode:"code",wrapper:function(e){var r=e.children;return a.createElement(a.Fragment,{},r)}},u=a.forwardRef((function(e,r){var t=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,p=m(e,["components","mdxType","originalType","parentName"]),d=s(t),u=n,g=d["".concat(l,".").concat(u)]||d[u]||k[u]||i;return t?a.createElement(g,o(o({ref:r},p),{},{components:t})):a.createElement(g,o({ref:r},p))}));function g(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var i=t.length,o=new Array(i);o[0]=u;var m={};for(var l in r)hasOwnProperty.call(r,l)&&(m[l]=r[l]);m.originalType=e,m[d]="string"==typeof e?e:n,o[1]=m;for(var s=2;s<i;s++)o[s]=t[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},3785:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>m,toc:()=>s});var a=t(7462),n=(t(7294),t(3905));const i={id:"index-grammar",title:"Modifikasjoner av VTL-grammatikk",sidebar_label:"Modifikasjoner av VTL-grammatikk",slug:"/administrator-guide/grammar",custom_edit_url:null},o=void 0,m={unversionedId:"administrator-guide/grammar/index-grammar",id:"administrator-guide/grammar/index-grammar",title:"Modifikasjoner av VTL-grammatikk",description:"Bruke VTL-grammatikken",source:"@site/i18n/no/docusaurus-plugin-content-docs/current/administrator-guide/grammar/index-grammar.mdx",sourceDirName:"administrator-guide/grammar",slug:"/administrator-guide/grammar",permalink:"/Trevas/no/administrator-guide/grammar",draft:!1,editUrl:null,tags:[],version:"current",lastUpdatedAt:1684905794,formattedLastUpdatedAt:"24. mai 2023",frontMatter:{id:"index-grammar",title:"Modifikasjoner av VTL-grammatikk",sidebar_label:"Modifikasjoner av VTL-grammatikk",slug:"/administrator-guide/grammar",custom_edit_url:null},sidebar:"docs",previous:{title:"Andre",permalink:"/Trevas/no/developer-guide/spark-mode/data-sources/others"}},l={},s=[{value:"Bruke VTL-grammatikken",id:"bruke-vtl-grammatikken",level:2},{value:"Grammatikktilpasninger",id:"grammatikktilpasninger",level:3},{value:"Forenkling av det grammatiske treet",id:"forenkling-av-det-grammatiske-treet",level:4},{value:"Tilsetting av avstandsoperat\xf8rer",id:"tilsetting-av-avstandsoperat\xf8rer",level:4}],p={toc:s};function d(e){let{components:r,...t}=e;return(0,n.kt)("wrapper",(0,a.Z)({},p,t,{components:r,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"bruke-vtl-grammatikken"},"Bruke VTL-grammatikken"),(0,n.kt)("p",null,"Trevas er avhengig av den formelle grammatikken til VTL uttrykt som ",(0,n.kt)("a",{parentName:"p",href:"https://fr.wikipedia.org/wiki/Extended_Backus-Naur_Form"},"EBNF"),". La r\xe9f\xe9rence est l'upgrade de la version 2.0 publi\xe9e en juillet 2020 ",(0,n.kt)("a",{parentName:"p",href:"https://sdmx.org/wp-content/uploads/VTL-2.0-EBNF-Grammar-2020-07.zip"},"sur le site web SDMX"),"."),(0,n.kt)("p",null,"Grammatikken best\xe5r av to filer klare til \xe5 bli behandlet av ",(0,n.kt)("a",{parentName:"p",href:"https://www.antlr.org/"},"Antlr")," parsergeneratoren :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("a",{parentName:"p",href:"https://github.com/InseeFr/Trevas/blob/master/vtl-parser/src/main/antlr4/fr/insee/vtl/parser/VtlTokens.g4"},"VtlTokens.g4")," inneholder listen over gyldige VTL-termer.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("a",{parentName:"p",href:"https://github.com/InseeFr/Trevas/blob/master/vtl-parser/src/main/antlr4/fr/insee/vtl/parser/Vtl.g4"},"Vtl.g4")," inneholder regler som lager gyldige VTL-uttrykk."))),(0,n.kt)("p",null,"Antlr bruker disse filene til \xe5 produsere en lexer, som lager en liste over ordforr\xe5dssymboler fra en input-tegnstr\xf8m, og en parser, som lager den grammatiske strukturen som tilsvarer denne listen over symboler. Antlr kan generere parsere som kan brukes p\xe5 forskjellige m\xe5lspr\xe5k. Trevas bruker parseren for Java, som er eksponert i ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/InseeFr/Trevas/tree/master/vtl-parser"},(0,n.kt)("inlineCode",{parentName:"a"},"vtl-parser"))," modulen."),(0,n.kt)("h3",{id:"grammatikktilpasninger"},"Grammatikktilpasninger"),(0,n.kt)("p",null,"For \xe5 forbedre ytelsen og funksjonaliteten er det gjort mindre endringer i VTL-grammatikken som brukes i Trevas."),(0,n.kt)("h4",{id:"forenkling-av-det-grammatiske-treet"},"Forenkling av det grammatiske treet"),(0,n.kt)("p",null,"Som dokumentert ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/VTL-Community/VTL-Community/issues/5"},"her")," og ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/InseeFr/Trevas-JS/issues/40"},"her"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"expr")," og ",(0,n.kt)("inlineCode",{parentName:"p"},"exprComp")," grenene til grammatikktreet er nesten identiske. For \xe5 unng\xe5 \xe5 m\xe5tte implementere den samme logikken to ganger, ble ",(0,n.kt)("inlineCode",{parentName:"p"},"exprComp")," grenen kommentert ut av commit ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/InseeFr/Trevas/commit/498c1f8be39702fbcfc89a3144ac1842d7771d93"},"498c1f8"),". Det ble senere lagt merke til at denne modifikasjonen feilaktig ugyldiggjorde ",(0,n.kt)("inlineCode",{parentName:"p"},"COUNT()")," uttrykket, og den tilsvarende regelen ble derfor gjeninnf\xf8rt i grammatikken av commit ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/InseeFr/Trevas/commit/54f86f27d2e8fdd57df1439d74ed56d225064a7d"},"54f86f2"),"."),(0,n.kt)("h4",{id:"tilsetting-av-avstandsoperat\xf8rer"},"Tilsetting av avstandsoperat\xf8rer"),(0,n.kt)("p",null,"Avstandsoperat\xf8rer som Levenshtein eller Jaro-Winkler brukes ofte i strengtesting. For \xe5 tillate dem i VTL-uttrykk, commit ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/InseeFr/Trevas/commit/036dc6055240a38c19be7afd1d3067e370353f9f"},"036dc60")," lagt til en del i grammatikken ",(0,n.kt)("inlineCode",{parentName:"p"},"distanceOperators")," som inneholder en ",(0,n.kt)("inlineCode",{parentName:"p"},"LEVENSHTEIN")," regel, samt ",(0,n.kt)("inlineCode",{parentName:"p"},"LEVENSHTEIN")," symbolet i lexer-filen."))}d.isMDXComponent=!0}}]);